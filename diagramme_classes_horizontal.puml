@startuml Diagramme de Classes Horizontal - Meubly

!define RECTANGLE class

' === STYLES ===
skinparam class {
    BackgroundColor<<Auth>> LightBlue
    BackgroundColor<<Service>> LightGreen
    BackgroundColor<<Entity>> LightYellow
    BackgroundColor<<External>> LightGray
    BorderColor Black
    FontColor Black
    FontSize 10
}

skinparam package {
    BackgroundColor White
    BorderColor Gray
}

' === DISPOSITION HORIZONTALE ===
' Colonne 1: Authentification
package "üîê Auth" {
    RECTANGLE "Supabase Auth" as SupabaseAuth <<External>> {
        + signInWithPassword()
        + signUp()
        + signOut()
        + getSession()
    }

    RECTANGLE AuthStore <<Auth>> {
        - user: User
        - session: Session
        + init(): void
        + isAuthenticated(): Boolean
    }

    RECTANGLE User <<Entity>> {
        - user_id: String
        - username: String
        - email: String
        - role: String
        + register(): User
        + login(): Session
    }
}

' Colonne 2: Services
package "üõ†Ô∏è Services" {
    RECTANGLE FurnitureService <<Service>> {
        - supabase: SupabaseClient
        + getFurnitureById(): Furniture
        + addFurniture(): Furniture
        + updateFurniture(): Furniture
        + deleteFurniture(): void
    }

    RECTANGLE SearchService <<Service>> {
        + searchFurniture(): Array<Furniture>
        + filterByCategory(): Array<Furniture>
        + filterByPrice(): Array<Furniture>
    }

    RECTANGLE FavoritesService <<Service>> {
        + addToFavorites(): void
        + removeFromFavorites(): void
        + getFavorites(): Array<Furniture>
    }
}

' Colonne 3: Entit√©s principales
package "üìä Entit√©s" {
    RECTANGLE Furniture <<Entity>> {
        - furniture_id: String
        - name: String
        - price: Number
        - cover_url: String
        - nb_offers: Number
        + getFurnitureById(): Furniture
        + addFurniture(): Furniture
    }

    RECTANGLE Offer <<Entity>> {
        - offer_id: String
        - website: String
        - prices: Number
        - furniture_id: String
        + getOffersByFurniture(): Array<Offer>
    }

    RECTANGLE Category <<Entity>> {
        - category_id: String
        - title: String
        - souscat_id: String
        + getCategories(): Array<Category>
        + getSubcategories(): Array<Category>
    }
}

' === RELATIONS OPTIMIS√âES ===
' Flux d'authentification
SupabaseAuth -right-> AuthStore : "fournit l'√©tat"
AuthStore -right-> User : "g√®re"

' Services vers entit√©s
FurnitureService -right-> Furniture : "g√®re"
SearchService -right-> Furniture : "recherche"
FavoritesService -right-> Furniture : "favoris"

' Relations entre entit√©s
Furniture -down-> Offer : "contient"
Furniture -down-> Category : "appartient √†"
Category -right-> Category : "sous-cat√©gorie"
User -up-> Furniture : "favorise"

' === NOTES COMPACTES ===
note top of SupabaseAuth : "Service externe"
note top of AuthStore : "Store Pinia"
note top of Furniture : "Entit√© principale"
note top of FurnitureService : "Service CRUD"

@enduml 